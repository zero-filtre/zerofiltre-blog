<div class="text-skin-base">
    <h2 class="text-2xl text-primary-500 font-medium mb-4 text-center">Vérification de votre numéro</h2>
    <form [formGroup]="verificationForm" (ngSubmit)="verify()">
        <div class="space-y-2">
            <label for="verificationCode" class="block">Un SMS a été envoyé au {{userNumber}}</label>
            <input id="verificationCode" type="text" formControlName="code"
                class="block w-full border border-gray-300 rounded-md p-2">
        </div>
        
        <div class="flex flex-col justify-between mt-4">
            <div *ngIf="showResend" class="text-gray-600 font-light text-sm">
                Vous pourrez demander un nouveau code dans <span class="font-bold ml-1">{{ minutes }} : {{ seconds | number: '2.0' }}</span>
            </div>

            <button *ngIf="countdown <= 0" type="button" (click)="resendCode()" class="flex gap-2 text-gray-600 font-light text-sm underline">
                Renvoyer le code
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
                    class="w-6 h-6 text-primary-500 {{sendingCode && 'animate-spin'}}">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 48.678 48.678 0 00-7.324 0 4.006 4.006 0 00-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3l-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 003.7 3.7 48.656 48.656 0 007.324 0 4.006 4.006 0 003.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3l-3 3" />
                </svg>
            </button>
            
            <div class="mt-2">
                <button *ngIf="verificationForm.valid" type="submit" [disabled]="verifying" [ngClass]="{'opacity-50': verifying}"
                    aria-labelledby="Update profile button"
                    class="button group shadow-md font-semibold relative w-full flex justify-center space-x-2 py-2 px-4 border border-transparent text-sm rounded-md text-white bg-primary-300 hover:bg-primary-500 focus:outline-none">
                    <svg *ngIf="verifying" class="w-5 h-5 animate-spin" xmlns="http://www.w3.org/2000/svg"
                        xmlns:xlink="http://www.w3.org/1999/xlink" width="200px" height="200px" viewBox="0 0 100 100"
                        preserveAspectRatio="xMidYMid">
                        <circle cx="50" cy="50" fill="none" stroke="#fff" stroke-width="10" r="35"
                            stroke-dasharray="164.93361431346415 56.97787143782138" transform="matrix(1,0,0,1,0,0)"
                            style="animation-play-state:paused"></circle>
                    </svg>
                    <span>Verifier</span>
                </button>
                <button *ngIf="verificationForm.invalid" [disabled]="verificationForm.invalid || verifying" aria-labelledby="Update profile button"
                    class="button group shadow-md font-semibold relative w-full flex justify-center py-2 px-4 border border-transparent text-sm rounded-md text-white bg-primary-300 bg-opacity-20">
                    <span>Verifier</span>
                </button>
            </div>
        </div>
    </form>
</div>