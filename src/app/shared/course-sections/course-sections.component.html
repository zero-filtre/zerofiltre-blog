<cdk-accordion class="flex flex-col gap-0.5">
    <ng-container *ngFor="let section of sections; let index = index">
        <cdk-accordion-item #accordionItem="cdkAccordionItem" class="block">
            <button 
                class="w-full flex items-center justify-between gap-4 uppercase opacity-90 bg-primary-100 text-secondary p-3 font-semibold rounded"
                (click)="accordionItem.toggle()" tabindex="0"
                [attr.id]="'accordion-header-' + index" [attr.aria-expanded]="accordionItem.expanded"
                [attr.aria-controls]="'accordion-body-' + index">
                {{ section.title }}

                <div class="capitalize text-sm font-medium">
                    <div *ngIf="accordionItem.expanded" class="flex items-center gap-1">
                        <span class="hidden lg:inline-flex ">fermer</span>
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none"
                            viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"
                            class="w-4 h-4 mt-[3px]">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M4.5 15.75l7.5-7.5 7.5 7.5" />
                        </svg>
                    </div>
                    <div *ngIf="!accordionItem.expanded"
                        class="flex items-center gap-1">
                        <span class="hidden lg:inline-flex">d√©rouler</span>
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none"
                            viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"
                            class="w-4 h-4 mt-[3px]">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                        </svg>
                    </div>
                </div>
            </button>

            <ng-container *ngIf="accordionItem.expanded">
                <div class="example-accordion-item-body lg:mt-4" role="region"
                    [style.display]="accordionItem.expanded ? '' : 'none'" [attr.id]="'accordion-body-' + index"
                    [attr.aria-labelledby]="'accordion-header-' + index">
                    <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
                        <div class="text lg:col-span-8">
                            <h3>{{section.title}}</h3>
                            <app-markdown-preview [data]="section?.content"></app-markdown-preview>
                        </div>

                        <div class="image lg:col-span-4 self-center">
                            <app-image [classes]="'w-full h-full max-w-[300px] lg:max-w-[350px] mx-auto object-contain'"
                                [sourceUrl]="section?.image" [alt]="section?.title">
                            </app-image>
                        </div>
                    </div>
                </div>
            </ng-container>
        </cdk-accordion-item>
    </ng-container>
</cdk-accordion>